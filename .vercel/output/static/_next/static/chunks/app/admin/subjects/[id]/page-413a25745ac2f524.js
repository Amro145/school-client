(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[836],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},187:(e,t,s)=>{"use strict";s.d(t,{$J:()=>n,Ay:()=>c,gt:()=>i});var a=s(9267),r=s(2466),l=s(5125);let n=(0,a.zD)("subject/fetchById",async(e,t)=>{let{rejectWithValue:s,getState:a}=t,{auth:n}=a();if(!n.isAuthenticated)return s("User must be authenticated to fetch subject details");try{let t=await r.A.post("",{query:"\n      query MyQuery($id: Int!) {\n        subject(id: $id) {\n          id\n          name\n          teacher {\n            id\n            userName\n          }\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            student {\n              id\n              userName\n            }\n            score\n          }\n        }\n      }\n    ",variables:{id:parseInt(e)}});if(t.data.errors)return s(t.data.errors[0].message);return t.data.data.subject}catch(e){if(l.A.isAxiosError(e)){var d,i;return s((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch subject details")}return s("An unexpected error occurred")}}),d=(0,a.Z0)({name:"subject",initialState:{currentSubject:null,loading:!1,error:null},reducers:{resetSubject:e=>{e.currentSubject=null,e.error=null}},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null,e.currentSubject=null}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.currentSubject=t.payload}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"})}}),{resetSubject:i}=d.actions,c=d.reducer},508:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},534:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1524:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},1847:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:i?24*Number(d)/Number(r):d,className:l("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),i=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:i,...c}=s;return(0,a.createElement)(d,{ref:n,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return s.displayName=r(e),s}},2466:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(5125),r=s(2378),l=s(5704);let n=a.A.create({baseURL:l.env.NEXT_PUBLIC_API_URL||"https://schoolapi.amroaltayeb14.workers.dev/graphql",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=r.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&r.A.remove("auth_token"),Promise.reject(e)});let d=n},5626:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6379:(e,t,s)=>{Promise.resolve().then(s.bind(s,7053))},6613:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},7053:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v,runtime:()=>j});var a=s(5155),r=s(2115),l=s(63),n=s(1213),d=s(187),i=s(2619),c=s.n(i),o=s(534),x=s(6132),u=s(5626),h=s(508),m=s(9397),p=s(1524),b=s(6613),g=s(9442),f=s(1169);let j="edge";function v(){var e,t,s,i,j,v;let y=(0,l.useParams)(),N=null==y?void 0:y.id,w=(0,n.wA)();(0,l.useRouter)();let{currentSubject:k,loading:A,error:M}=(0,n.d4)(e=>e.subject);if((0,r.useEffect)(()=>(N&&w((0,d.$J)(N)),()=>{w((0,d.gt)())}),[N,w]),A)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-20 h-20 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"}),(0,a.jsx)(o.A,{className:"w-8 h-8 text-blue-600 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-slate-900 font-black text-xl tracking-tight animate-pulse",children:"Analyzing Subject Metrics..."}),(0,a.jsx)("p",{className:"text-slate-500 font-medium text-sm mt-1 italic",children:"Retrieving academic performance data from edge nodes..."})]})]});if(M)return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto mt-12 bg-white border border-rose-100 p-12 rounded-[48px] shadow-2xl shadow-rose-500/5 flex flex-col items-center text-center space-y-8 animate-in fade-in zoom-in duration-500",children:[(0,a.jsx)("div",{className:"p-6 bg-rose-50 rounded-[32px]",children:(0,a.jsx)(x.A,{className:"w-12 h-12 text-rose-500"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-3xl font-black text-slate-900 leading-tight",children:"Data Synchronization Error"}),(0,a.jsx)("p",{className:"text-slate-500 font-medium text-lg leading-relaxed",children:M})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>w((0,d.$J)(N)),className:"px-10 py-4 bg-rose-600 text-white rounded-2xl font-black hover:bg-rose-700 transition-all active:scale-95 shadow-lg shadow-rose-200 uppercase tracking-widest text-xs",children:"Retry Connection"}),(0,a.jsx)(c(),{href:"/admin/subjects",className:"px-10 py-4 bg-slate-100 text-slate-600 rounded-2xl font-black hover:bg-slate-200 transition-all active:scale-95 uppercase tracking-widest text-xs",children:"Return to Index"})]})]});if(!k)return null;let _=(null==(e=k.grades)?void 0:e.length)>0?Math.round(k.grades.reduce((e,t)=>e+t.score,0)/k.grades.length):null;return(0,a.jsxs)("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-8 duration-1000 pb-20",children:[(0,a.jsxs)(c(),{href:"/admin/subjects",className:"inline-flex items-center space-x-3 px-6 py-3 bg-white border border-slate-100 rounded-2xl text-slate-500 hover:text-blue-600 hover:border-blue-100 font-black text-xs uppercase tracking-widest transition-all shadow-sm active:scale-95 group",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),(0,a.jsx)("span",{children:"Back to Curriculum Index"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2 bg-white p-10 rounded-[48px] border border-slate-100 shadow-[0_8px_30px_rgb(0,0,0,0.02)] flex flex-col md:flex-row md:items-center justify-between gap-10",children:(0,a.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-3xl flex items-center justify-center text-white shadow-xl shadow-blue-500/20 transform hover:scale-110 hover:rotate-3 transition-transform duration-500",children:(0,a.jsx)(o.A,{className:"w-10 h-10"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("span",{className:"text-[10px] bg-blue-50 text-blue-600 px-3 py-1 rounded-full font-black uppercase tracking-[0.2em]",children:"Subject Node"}),(0,a.jsxs)("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-3 py-1 rounded-full font-black uppercase tracking-[0.2em]",children:["ID: ",k.id]})]}),(0,a.jsx)("h1",{className:"text-5xl font-black text-slate-900 tracking-tighter leading-none",children:k.name}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center mt-6 gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center shadow-sm",children:(0,a.jsx)(h.A,{className:"w-4 h-4 text-slate-400"})}),(0,a.jsx)("span",{className:"text-slate-900 font-black text-sm",children:(null==(t=k.teacher)?void 0:t.userName)||"TBA"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center shadow-sm",children:(0,a.jsx)(m.A,{className:"w-4 h-4 text-slate-400"})}),(0,a.jsx)("span",{className:"text-slate-900 font-black text-sm",children:(null==(s=k.class)?void 0:s.name)||"Global"})]})]})]})]})}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-10 rounded-[48px] text-white shadow-2xl relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:scale-150 group-hover:rotate-12 transition-transform duration-1000",children:(0,a.jsx)(p.A,{className:"w-32 h-32"})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Weighted Performance"}),(0,a.jsx)(b.A,{className:"w-6 h-6 text-amber-400"})]}),(0,a.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,a.jsx)("span",{className:"text-6xl font-black tracking-tighter tabular-nums",children:null!==_?_:"--"}),(0,a.jsx)("span",{className:"text-2xl font-black text-slate-500 leading-none",children:"%"})]}),(0,a.jsxs)("p",{className:"text-slate-400 font-medium mt-4 text-sm leading-relaxed",children:["Composite average across ",(null==(i=k.grades)?void 0:i.length)||0," active student nodes."]}),(0,a.jsxs)("div",{className:"mt-8 space-y-3",children:[(0,a.jsx)("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-1000 ".concat(_&&_>80?"bg-emerald-400 shadow-[0_0_12px_rgba(52,211,153,0.5)]":"bg-blue-400 shadow-[0_0_12px_rgba(96,165,250,0.5)]"),style:{width:"".concat(_||0,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest text-slate-500",children:[(0,a.jsx)("span",{children:"Minimum Scope"}),(0,a.jsx)("span",{children:"Optimal Threshold"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-[56px] border border-slate-100 shadow-[0_8px_30px_rgb(0,0,0,0.02)] overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6 glass",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 shadow-inner",children:(0,a.jsx)(g.A,{className:"w-8 h-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Intelligence Ledger"}),(0,a.jsxs)("p",{className:"text-slate-400 font-medium mt-1.5 text-sm uppercase tracking-widest",children:[(null==(j=k.grades)?void 0:j.length)||0," Evaluated Student Nodes"]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"px-6 py-3 bg-slate-50 border border-slate-100 rounded-2xl text-[10px] font-black uppercase tracking-tighter text-slate-500",children:["Academic Integrity: ",(0,a.jsx)("span",{className:"text-emerald-600",children:"Verified"})]})})]}),(0,a.jsx)("div",{className:"overflow-x-auto custom-scrollbar",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-slate-50/50 text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] border-b border-slate-100",children:[(0,a.jsx)("th",{className:"px-12 py-8",children:"Student Identification"}),(0,a.jsx)("th",{className:"px-12 py-8",children:"Academic Trajectory"}),(0,a.jsx)("th",{className:"px-12 py-8 text-center",children:"Outcome Status"}),(0,a.jsx)("th",{className:"px-12 py-8 text-right",children:"Operational Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-50",children:null==(v=k.grades)?void 0:v.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"hover:bg-slate-50/30 transition-all duration-300 group",children:[(0,a.jsx)("td",{className:"px-12 py-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:bg-blue-100 group-hover:text-blue-600 transition-all duration-500",children:(0,a.jsx)(h.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-black text-slate-900 text-lg group-hover:text-blue-600 transition-colors leading-none mb-1.5",children:(null==(t=e.student)?void 0:t.userName)||"Anonymous Node"}),(0,a.jsxs)("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md font-black uppercase tracking-widest",children:["SID: ",(null==(s=e.student)?void 0:s.id)||e.id]})]})]})}),(0,a.jsx)("td",{className:"px-12 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between w-full max-w-[200px]",children:(0,a.jsxs)("span",{className:"text-xl font-black tabular-nums ".concat(e.score>=85?"text-emerald-500":e.score>=70?"text-blue-500":"text-rose-500"),children:[e.score,"%"]})}),(0,a.jsx)("div",{className:"w-full max-w-[200px] h-2 bg-slate-100 rounded-full overflow-hidden shadow-inner",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-1000 ".concat(e.score>=85?"bg-emerald-500":e.score>=70?"bg-blue-500":"bg-rose-500"),style:{width:"".concat(e.score,"%")}})})]})}),(0,a.jsx)("td",{className:"px-12 py-8 text-center",children:e.score>=70?(0,a.jsx)("div",{className:"inline-flex items-center px-4 py-1.5 bg-emerald-50 text-emerald-600 rounded-full border border-emerald-100 text-[10px] font-black uppercase tracking-widest shadow-sm",children:"Optimal Flow"}):(0,a.jsx)("div",{className:"inline-flex items-center px-4 py-1.5 bg-rose-50 text-rose-600 rounded-full border border-rose-100 text-[10px] font-black uppercase tracking-widest shadow-sm",children:"Attention Required"})}),(0,a.jsx)("td",{className:"px-12 py-8 text-right",children:(0,a.jsx)("button",{className:"px-6 py-3 bg-white border border-slate-100 text-slate-400 hover:text-blue-600 hover:border-blue-100 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-sm transition-all active:scale-95",children:"Adjust Metrics"})})]},e.id)})})]})}),(!k.grades||0===k.grades.length)&&(0,a.jsxs)("div",{className:"py-24 text-center bg-white",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-slate-50 rounded-[32px] flex items-center justify-center mx-auto mb-6 shadow-inner",children:(0,a.jsx)(f.A,{className:"w-12 h-12 text-slate-200"})}),(0,a.jsx)("h3",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Outcome Data Unavailable"}),(0,a.jsx)("p",{className:"text-slate-400 max-w-sm mx-auto font-medium mt-2 italic",children:"Evaluation scores for this subject node have not been synchronized yet."})]}),(0,a.jsxs)("div",{className:"p-10 bg-slate-50/30 border-t border-slate-100 text-center glass",children:[(0,a.jsx)("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mb-6",children:"Subject Performance Analytics Node"}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[(0,a.jsx)("button",{className:"bg-slate-900 text-white px-10 py-5 rounded-3xl font-black text-xs uppercase tracking-widest hover:bg-slate-800 transition-all shadow-2xl active:scale-95",children:"Generate Aggregate Report"}),(0,a.jsx)("button",{className:"bg-white text-slate-800 border border-slate-200 px-10 py-5 rounded-3xl font-black text-xs uppercase tracking-widest hover:bg-slate-50 transition-all shadow-xl shadow-slate-200/50 active:scale-95",children:"Export Raw Data Matrix"})]})]})]})]})}},9397:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])},9442:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])}},e=>{e.O(0,[619,196,441,255,358],()=>e(e.s=6379)),_N_E=e.O()}]);