(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{534:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},986:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,DN:()=>d,QA:()=>n,id:()=>i,un:()=>c,yx:()=>o});var a=r(9267),s=r(2466),l=r(5125);let n=(0,a.zD)("admin/fetchDashboardData",async(e,t)=>{let{rejectWithValue:r,getState:a}=t,{auth:n}=a();if(!n.isAuthenticated)return r("User must be authenticated to fetch admin data");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        adminDashboardStats {\n          totalStudents\n          totalTeachers\n          totalClassRooms\n        }\n        subjects {\n          id\n          name\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch data")}return r("An unexpected error occurred")}}),d=(0,a.zD)("admin/fetchMyStudents",async(e,t)=>{let{rejectWithValue:r,getState:a}=t,{auth:n}=a();if(!n.isAuthenticated)return r("User must be authenticated to fetch students");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        myStudents {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.myStudents}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch students")}return r("An unexpected error occurred")}}),i=(0,a.zD)("admin/fetchMyTeachers",async(e,t)=>{let{rejectWithValue:r,getState:a}=t,{auth:n}=a();if(!n.isAuthenticated)return r("User must be authenticated to fetch teachers");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        myTeachers {\n          id\n          userName\n          email\n          role\n          subjectsTaught {\n            id\n            name\n            grades {\n              id\n              score\n            }\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.myTeachers}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch teachers")}return r("An unexpected error occurred")}}),o=(0,a.zD)("admin/fetchSubjects",async(e,t)=>{let{rejectWithValue:r,getState:a}=t,{auth:n}=a();if(!n.isAuthenticated)return r("User must be authenticated to fetch subjects");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        subjects {\n          id\n          name\n          teacher {\n            id\n            userName\n          }\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.subjects}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch subjects")}return r("An unexpected error occurred")}}),c=(0,a.zD)("admin/fetchStudentById",async(e,t)=>{let{rejectWithValue:r,getState:a}=t,{auth:n}=a();if(!n.isAuthenticated)return r("User must be authenticated to fetch student details");try{let t=await s.A.post("",{query:"\n      query MyQuery($id: Int!) {\n        student(id: $id) {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n            subject {\n              id\n              name\n            }\n          }\n        }\n      }\n    ",variables:{id:e}});if(t.data.errors)return r(t.data.errors[0].message);return t.data.data.student}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch student")}return r("An unexpected error occurred")}}),u=(0,a.Z0)({name:"admin",initialState:{stats:null,subjects:[],students:[],teachers:[],currentStudent:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.stats=t.payload.adminDashboardStats,e.subjects=t.payload.subjects}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.students=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.teachers=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.subjects=t.payload}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(c.pending,e=>{e.loading=!0,e.error=null,e.currentStudent=null}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.currentStudent=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"})}}).reducer},1169:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1524:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:i?24*Number(d)/Number(s):d,className:l("lucide",o),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:i,...o}=r;return(0,a.createElement)(d,{ref:n,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...o})});return r.displayName=s(e),r}},2466:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5125),s=r(2378);let l=a.A.create({baseURL:"https://schoolapi.amroaltayeb14.workers.dev/graphql",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=s.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&s.A.remove("auth_token"),Promise.reject(e)});let n=l},2563:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(5155),s=r(2115),l=r(1213),n=r(986),d=r(5299),i=r(6132),o=r(9442),c=r(1169),u=r(7937),h=r(534),m=r(1524),x=r(7013);function b(){let e=(0,l.wA)(),{stats:t,subjects:r,loading:b,error:p}=(0,l.d4)(e=>e.admin);if((0,s.useEffect)(()=>{e((0,n.QA)())},[e]),b)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 text-blue-600 animate-spin"}),(0,a.jsx)("p",{className:"text-slate-500 font-medium italic",children:"Loading dashboard intelligence..."})]});if(p)return(0,a.jsxs)("div",{className:"bg-red-50 border border-red-100 p-8 rounded-3xl flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"p-3 bg-red-100 rounded-2xl",children:(0,a.jsx)(i.A,{className:"w-6 h-6 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-red-900",children:"Connection Failed"}),(0,a.jsx)("p",{className:"text-red-700 mt-1",children:p}),(0,a.jsx)("button",{onClick:()=>e((0,n.QA)()),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-xl text-sm font-bold hover:bg-red-700 transition",children:"Retry Connection"})]})]});let g=[{name:"Total Students",value:(null==t?void 0:t.totalStudents)||0,icon:o.A,bgColor:"bg-blue-50",textColor:"text-blue-600"},{name:"Total Teachers",value:(null==t?void 0:t.totalTeachers)||0,icon:c.A,bgColor:"bg-purple-50",textColor:"text-purple-600"},{name:"Total Classes",value:(null==t?void 0:t.totalClassRooms)||0,icon:u.A,bgColor:"bg-green-50",textColor:"text-green-600"},{name:"Registered Subjects",value:(null==r?void 0:r.length)||0,icon:h.A,bgColor:"bg-orange-50",textColor:"text-orange-600"}];return(0,a.jsxs)("div",{className:"space-y-12 pb-20",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-black text-slate-900 tracking-tight leading-none",children:"Intelligence Hub"}),(0,a.jsx)("p",{className:"text-slate-500 mt-3 font-medium text-lg italic",children:"Accessing real-time institutional analytics..."})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-100",children:[(0,a.jsx)("div",{className:"px-4 py-2 bg-blue-50 text-blue-600 rounded-xl text-xs font-black uppercase tracking-widest",children:"Global Overview"}),(0,a.jsx)("div",{className:"px-4 py-2 text-slate-400 text-xs font-black uppercase tracking-widest hover:text-slate-600 cursor-pointer transition-colors",children:"Detail Logs"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:g.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[40px] border border-slate-100 shadow-[0_8px_30px_rgb(0,0,0,0.02)] hover:shadow-[0_32px_64px_-16px_rgba(0,0,0,0.08)] hover:-translate-y-1 transition-all duration-500 group relative overflow-hidden",style:{animationDelay:"".concat(100*t,"ms")},children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 ".concat(e.bgColor.replace("50","500"),"/5 rounded-full blur-3xl -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-700")}),(0,a.jsxs)("div",{className:"flex items-start justify-between mb-8 relative z-10",children:[(0,a.jsx)("div",{className:"p-4 rounded-3xl ".concat(e.bgColor," group-hover:scale-110 transition-transform duration-500 shadow-inner"),children:(0,a.jsx)(e.icon,{className:"w-8 h-8 ".concat(e.textColor)})}),(0,a.jsxs)("div",{className:"flex items-center text-blue-600 text-[10px] font-black tracking-widest bg-blue-50 px-3 py-1.5 rounded-full border border-blue-100/50",children:[(0,a.jsx)(m.A,{className:"w-3 h-3 mr-1.5"}),"LIVE"]})]}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:e.name}),(0,a.jsx)("h3",{className:"text-5xl font-black text-slate-900 tracking-tighter",children:e.value})]})]},e.name))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white p-10 rounded-[48px] border border-slate-100 shadow-[0_8px_30px_rgb(0,0,0,0.02)]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Active Curriculum"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-400 mt-1",children:"Academic Performance Tracking"})]}),(0,a.jsx)("button",{className:"p-3 bg-slate-50 hover:bg-slate-100 rounded-2xl transition-all border border-slate-200/50",children:(0,a.jsx)(x.A,{className:"w-5 h-5 text-slate-400"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[r.map(e=>{var t,r;return(0,a.jsxs)("div",{className:"group flex items-center justify-between p-6 bg-slate-50/50 rounded-3xl hover:bg-white hover:shadow-xl hover:shadow-slate-200/50 transition-all duration-500 border border-transparent hover:border-slate-100 cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-white flex items-center justify-center border border-slate-100 text-xl font-black text-blue-600 shadow-sm group-hover:rotate-6 transition-transform",children:e.name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-black text-slate-900 leading-none mb-1 group-hover:text-blue-600 transition-colors",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:"Departmental Standards"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-black text-slate-900",children:[e.grades.length," Submissions"]}),(0,a.jsxs)("div",{className:"mt-1 flex items-center justify-end",children:[(0,a.jsx)("div",{className:"w-24 h-1.5 bg-slate-200 rounded-full overflow-hidden mr-3",children:(0,a.jsx)("div",{className:"h-full bg-blue-600 rounded-full",style:{width:"".concat((null==(t=e.grades[0])?void 0:t.score)||0,"%")}})}),(0,a.jsxs)("span",{className:"text-xs font-black text-blue-600",children:[(null==(r=e.grades[0])?void 0:r.score)||0,"%"]})]})]})]},e.id)}),0===r.length&&(0,a.jsxs)("div",{className:"text-center py-20 bg-slate-50 rounded-[40px] border-2 border-dashed border-slate-200",children:[(0,a.jsx)(u.A,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400 font-bold italic",children:"Awaiting Curriculum Data Deployment"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-slate-900 p-10 rounded-[48px] text-white relative overflow-hidden group shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 -mt-12 -mr-12 w-48 h-48 bg-blue-500/20 rounded-full blur-[80px] group-hover:bg-blue-500/30 transition-all duration-1000"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 -mb-12 -ml-12 w-48 h-48 bg-purple-500/10 rounded-full blur-[80px]"}),(0,a.jsx)("h2",{className:"text-2xl font-black mb-10 relative z-10 tracking-tight",children:"Rapid Actions"}),(0,a.jsxs)("div",{className:"space-y-4 relative z-10",children:[[{label:"Enroll Student",color:"bg-white/5 hover:bg-white/10"},{label:"Register Teacher",color:"bg-white/5 hover:bg-white/10"},{label:"New Classroom",color:"bg-white/5 hover:bg-white/10"}].map(e=>(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-5 ".concat(e.color," rounded-x-3xl rounded-[24px] transition-all font-bold text-sm backdrop-blur-md border border-white/5 group/btn"),children:[e.label," ",(0,a.jsx)(x.A,{className:"w-4 h-4 text-slate-500 group-hover/btn:text-white group-hover/btn:translate-x-0.5 group-hover/btn:-translate-y-0.5 transition-all"})]},e.label)),(0,a.jsx)("button",{className:"w-full flex items-center justify-center p-6 bg-blue-600 hover:bg-blue-500 rounded-[28px] transition-all font-black text-sm shadow-xl shadow-blue-500/40 mt-6 active:scale-95",children:"GENERATE SYSTEM REPORT"})]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 p-10 rounded-[48px] text-white shadow-xl relative overflow-hidden",children:(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("h3",{className:"text-xl font-black mb-2 leading-tight tracking-tight",children:"System Status"}),(0,a.jsx)("p",{className:"text-white/70 text-sm font-medium mb-8 leading-relaxed",children:"All modules are operating within normal educational parameters."}),(0,a.jsxs)("div",{className:"flex -space-x-3",children:[[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"w-10 h-10 rounded-full border-4 border-indigo-600 bg-slate-200 overflow-hidden shadow-lg",children:(0,a.jsx)("img",{src:"https://i.pravatar.cc/100?u=".concat(e),alt:"user",className:"w-full h-full object-cover"})},e)),(0,a.jsx)("div",{className:"w-10 h-10 rounded-full border-4 border-indigo-600 bg-white/20 backdrop-blur-sm flex items-center justify-center text-[10px] font-black",children:"+12"})]})]})})]})]})]})}},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6132:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7013:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},7343:(e,t,r)=>{Promise.resolve().then(r.bind(r,2563))},7937:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},9442:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])}},e=>{e.O(0,[196,441,255,358],()=>e(e.s=7343)),_N_E=e.O()}]);