(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},534:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1847:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:c,iconNode:h,...u}=e;return(0,s.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:a,strokeWidth:d?24*Number(i)/Number(r):i,className:l("lucide",o),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),d=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:d,...o}=a;return(0,s.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return a.displayName=r(e),a}},2466:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5125),r=a(2378);let l=s.A.create({baseURL:"https://schoolapi.amroaltayeb14.workers.dev/graphql",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=r.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&r.A.remove("auth_token"),Promise.reject(e)});let n=l},3142:(e,t,a)=>{Promise.resolve().then(a.bind(a,4321))},3915:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>h,Lx:()=>d,ri:()=>c});var s=a(9267),r=a(2466),l=a(2378),n=a(5125);let i={user:null,token:l.A.get("auth_token")||null,loading:!1,error:null,isAuthenticated:!!l.A.get("auth_token")},d=(0,s.zD)("auth/login",async(e,t)=>{let{email:a,password:s}=e,{rejectWithValue:i}=t;try{let e=await r.A.post("",{query:"\n      mutation login($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n          token\n          user {\n            id\n            email\n            userName\n            role\n          }\n        }\n      }\n    ",variables:{email:a,password:s}});if(e.data.errors)return i(e.data.errors[0].message);let{token:t,user:n}=e.data.data.login;return l.A.set("auth_token",t,{expires:7,secure:!0,sameSite:"strict"}),{token:t,user:n}}catch(e){if(n.A.isAxiosError(e)){var d,o;return i((null==(o=e.response)||null==(d=o.data)?void 0:d.message)||e.message||"Login failed")}return i("Login failed")}}),o=(0,s.Z0)({name:"auth",initialState:i,reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,l.A.remove("auth_token")}},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.token=t.payload.token,e.user=t.payload.user,e.isAuthenticated=!0}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{logout:c}=o.actions,h=o.reducer},4321:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(5155),r=a(2619),l=a.n(r),n=a(63),i=a(1847);let d=(0,i.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=a(7937),c=a(534),h=a(9442),u=a(1169);let x=(0,i.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),m=(0,i.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),p=(0,i.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),f=(0,i.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var b=a(2115),g=a(1213),j=a(5299);function k(e){let{children:t}=e,{isAuthenticated:a,loading:r}=(0,g.d4)(e=>e.auth),l=(0,n.useRouter)(),i=(0,n.usePathname)();return((0,b.useEffect)(()=>{a||r||"/login"===i||l.push("/login")},[a,r,l,i]),a||"/login"===i)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,s.jsx)(j.A,{className:"w-12 h-12 text-blue-600 animate-spin"})})}var v=a(3915);let w=[{name:"Dashboard",href:"/admin",icon:d},{name:"Classes",href:"/admin/classes",icon:o.A},{name:"Subjects",href:"/admin/subjects",icon:c.A},{name:"Students",href:"/admin/students",icon:h.A},{name:"Teachers",href:"/admin/teachers",icon:u.A}];function y(e){let{children:t}=e,a=(0,n.usePathname)(),[r,i]=(0,b.useState)(!1),d=(0,g.wA)(),o=e=>{e.preventDefault(),d((0,v.ri)())};return(0,s.jsx)(k,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-[#f8fafc] flex",children:[(0,s.jsx)("aside",{className:"hidden md:flex w-80 flex-col fixed h-full z-30",children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 bg-white border-r border-slate-200/60 shadow-[4px_0_24px_-12px_rgba(0,0,0,0.05)]",children:[(0,s.jsx)("div",{className:"px-8 py-10",children:(0,s.jsxs)(l(),{href:"/admin",className:"flex items-center group",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-[18px] flex items-center justify-center shadow-lg shadow-blue-500/30 group-hover:scale-105 transition-transform duration-300",children:(0,s.jsx)(x,{className:"text-white w-7 h-7"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("span",{className:"block text-2xl font-black text-slate-900 tracking-tighter leading-none",children:"EDUDASH"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-widest mt-1 block",children:"Administrator"})]})]})}),(0,s.jsxs)("nav",{className:"flex-1 px-4 space-y-1.5 overflow-y-auto custom-scrollbar",children:[(0,s.jsx)("p",{className:"px-4 text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Main Navigation"}),w.map(e=>{let t=a===e.href;return(0,s.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-5 py-4 rounded-2xl font-bold transition-all duration-300 group ".concat(t?"bg-blue-600 text-white shadow-xl shadow-blue-500/25 translate-x-1":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5 transition-colors ".concat(t?"text-white":"text-slate-400 group-hover:text-slate-900")}),(0,s.jsx)("span",{className:"tracking-tight",children:e.name}),t&&(0,s.jsx)("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-white/40"})]},e.name)})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"p-5 bg-slate-900 rounded-[32px] overflow-hidden relative group cursor-pointer border border-white/5 shadow-2xl",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/20 rounded-full blur-2xl -mr-8 -mt-8 group-hover:bg-blue-500/30 transition-all duration-500"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-blue-400 mb-1",children:"PRO PLAN"}),(0,s.jsx)("p",{className:"text-sm font-bold text-white mb-3",children:"Upgrade to Enterprise"}),(0,s.jsx)("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 text-white text-[11px] font-black uppercase tracking-widest rounded-xl transition-all border border-white/10",children:"Learn More"})]})]})}),(0,s.jsx)("div",{className:"px-4 py-6 border-t border-slate-100",children:(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center space-x-3 px-5 py-4 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-2xl transition-all duration-300 group font-bold",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-xl bg-slate-50 group-hover:bg-red-100 transition-colors flex items-center justify-center",children:(0,s.jsx)(m,{className:"w-4 h-4"})}),(0,s.jsx)("span",{children:"Logout Session"})]})})]})}),(0,s.jsxs)("main",{className:"grow md:ml-80 min-h-screen",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 px-6 py-5 md:px-10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:()=>i(!0),className:"md:hidden mr-4 p-2 text-slate-500 hover:bg-slate-100 rounded-xl transition-all",children:(0,s.jsx)(p,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:"hidden md:block",children:[(0,s.jsx)("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-[0.2em]",children:"Management Overview"}),(0,s.jsx)("p",{className:"text-lg font-bold text-slate-900 tracking-tight",children:"System Terminal"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"hidden sm:flex items-center bg-slate-100 rounded-2xl px-4 py-2 border border-slate-200/50",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse mr-3"}),(0,s.jsx)("span",{className:"text-xs font-bold text-slate-600",children:"Cloud Status: Optimal"})]}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-slate-800 to-slate-950 border border-white/10 flex items-center justify-center text-white font-black text-xs shadow-lg",children:"AD"})]})]}),r&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 md:hidden overflow-hidden",onClick:()=>i(!1),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-md"}),(0,s.jsxs)("div",{className:"absolute inset-y-0 left-0 w-80 bg-white shadow-2xl flex flex-col animate-in slide-in-from-left duration-500",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-8 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)(x,{className:"text-white w-6 h-6"})}),(0,s.jsx)("span",{className:"ml-3 text-xl font-black text-slate-900 tracking-tighter",children:"EDUDASH"})]}),(0,s.jsx)("button",{onClick:()=>i(!1),className:"p-2 bg-slate-50 rounded-xl",children:(0,s.jsx)(f,{className:"w-5 h-5 text-slate-500"})})]}),(0,s.jsx)("nav",{className:"flex-1 px-4 space-y-1.5 pt-4",children:w.map(e=>{let t=a===e.href;return(0,s.jsxs)(l(),{href:e.href,onClick:()=>i(!1),className:"flex items-center space-x-3 px-5 py-4 rounded-2xl font-bold transition-all ".concat(t?"bg-blue-600 text-white":"text-slate-500"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:e.name})]},e.name)})}),(0,s.jsx)("div",{className:"p-6 border-t border-slate-100",children:(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center space-x-3 px-5 py-4 text-slate-500 font-bold",children:[(0,s.jsx)(m,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Log Out"})]})})]})]}),(0,s.jsx)("div",{className:"p-6 md:p-12 max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-1000",children:t})]})]})})}},5299:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7937:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},9442:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])}},e=>{e.O(0,[619,196,441,255,358],()=>e(e.s=3142)),_N_E=e.O()}]);