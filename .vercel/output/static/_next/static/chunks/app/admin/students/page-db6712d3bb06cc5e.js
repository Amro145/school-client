(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{69:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},800:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j,runtime:()=>g});var s=r(5155),a=r(2115),n=r(1213),d=r(986),l=r(5299),i=r(6132),c=r(6191),o=r(6651),u=r(69),h=r(7937),x=r(3664),m=r(9442),p=r(1360),y=r(2619),f=r.n(y);let g="edge";function j(){let e=(0,n.wA)(),{students:t,loading:r,error:y}=(0,n.d4)(e=>e.admin);return((0,a.useEffect)(()=>{e((0,d.DN)())},[e]),r&&0===t.length)?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,s.jsx)(l.A,{className:"w-12 h-12 text-blue-600 animate-spin"}),(0,s.jsx)("p",{className:"text-slate-500 font-medium italic",children:"Synchronizing student records..."})]}):y?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-100 p-8 rounded-3xl flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"p-3 bg-red-100 rounded-2xl",children:(0,s.jsx)(i.A,{className:"w-6 h-6 text-red-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-red-900",children:"Data Retrieval Failed"}),(0,s.jsx)("p",{className:"text-red-700 mt-1",children:y}),(0,s.jsx)("button",{onClick:()=>e((0,d.DN)()),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-xl text-sm font-bold hover:bg-red-700 transition",children:"Retry Fetch"})]})]}):(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Students Management"}),(0,s.jsx)("p",{className:"text-slate-500 mt-2 font-medium",children:"Manage student credentials, class assignments, and grade history."})]}),(0,s.jsxs)(f(),{href:"/admin/students/new",className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center justify-center shadow-lg shadow-blue-500/20 active:scale-95",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 mr-2"})," Add New Student"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-3xl border border-slate-100 shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-50 relative group",children:[(0,s.jsx)("div",{className:"absolute left-10 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors",children:(0,s.jsx)(o.A,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:"text",placeholder:"Search student directories...",className:"w-full pl-12 pr-6 py-4 bg-slate-50 rounded-2xl border-none focus:ring-4 focus:ring-blue-100 placeholder-slate-400 transition-all font-medium text-slate-900 outline-none"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-slate-50 text-slate-500 text-xs font-bold uppercase tracking-widest border-b border-slate-100",children:[(0,s.jsx)("th",{className:"px-8 py-5",children:"Profile & Name"}),(0,s.jsx)("th",{className:"px-8 py-5",children:"Assigned Class"}),(0,s.jsx)("th",{className:"px-8 py-5",children:"Contact & Role"}),(0,s.jsx)("th",{className:"px-8 py-5",children:"Grade  %"}),(0,s.jsx)("th",{className:"px-8 py-5 text-right",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:null==t?void 0:t.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[(0,s.jsx)("td",{className:"px-8 py-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 shadow-sm group-hover:scale-110 transition-transform",children:(0,s.jsx)(u.A,{className:"w-7 h-7"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f(),{href:"/admin/students/".concat(e.id),children:(0,s.jsx)("span",{className:"block font-bold text-slate-900",children:e.userName})}),(0,s.jsxs)("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider mt-1 inline-block",children:["ID: #",e.id]})]})]})}),(0,s.jsx)("td",{className:"px-8 py-6",children:(0,s.jsxs)("div",{className:"flex items-center text-slate-700 font-bold bg-slate-100/50 px-3 py-1.5 rounded-xl w-fit",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-2 text-slate-400"}),(null==(t=e.class)?void 0:t.name)||"Waitlisted"]})}),(0,s.jsx)("td",{className:"px-8 py-6",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center text-slate-600 font-medium text-sm",children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-2 text-slate-300"}),e.email]}),(0,s.jsx)("div",{className:"text-[11px] text-slate-400 font-bold uppercase ml-6",children:e.role})]})}),(0,s.jsx)("td",{className:"px-8 py-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex -space-x-2 overflow-hidden",children:e.grades.length>0?e.grades.slice(0,3).map(e=>(0,s.jsxs)("div",{className:"inline-block h-8 w-8 rounded-full ring-2 ring-white bg-green-500 text-white flex items-center justify-center text-[10px] font-bold",children:[e.score,"%"]},e.id)):(0,s.jsx)("span",{className:"text-xs text-slate-400 font-medium italic",children:"No scores yet"})}),e.grades.length>3&&(0,s.jsxs)("span",{className:"text-xs font-bold text-slate-400",children:["+",e.grades.length-3]})]})}),(0,s.jsx)("td",{className:"px-8 py-6 text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,s.jsx)("button",{className:"p-3 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all shadow-sm border border-transparent hover:border-blue-100",children:(0,s.jsx)(m.A,{className:"w-5 h-5"})}),(0,s.jsx)("button",{className:"p-3 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all shadow-sm border border-transparent hover:border-red-100",children:(0,s.jsx)(p.A,{className:"w-5 h-5"})})]})})]},e.id)})})]})}),0===t.length&&!r&&(0,s.jsxs)("div",{className:"p-16 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(b,{className:"w-10 h-10 text-slate-200"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"No students found"}),(0,s.jsx)("p",{className:"text-slate-500 mt-1 font-medium",children:"The student directory is currently empty."})]}),(0,s.jsx)("div",{className:"p-6 bg-slate-50/50 border-t border-slate-100 text-center",children:(0,s.jsx)("button",{className:"bg-white text-slate-600 border border-slate-200 px-6 py-2 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors shadow-sm active:scale-95",children:"Load Advanced Filter"})})]})]})}function b(e){return(0,s.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,s.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,s.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,s.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}},986:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,DN:()=>l,QA:()=>d,id:()=>i,un:()=>o,yx:()=>c});var s=r(9267),a=r(2466),n=r(5125);let d=(0,s.zD)("admin/fetchDashboardData",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:d}=s();if(!d.isAuthenticated)return r("User must be authenticated to fetch admin data");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        adminDashboardStats {\n          totalStudents\n          totalTeachers\n          totalClassRooms\n        }\n        subjects {\n          id\n          name\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data}catch(e){if(n.A.isAxiosError(e)){var l,i;return r((null==(i=e.response)||null==(l=i.data)?void 0:l.message)||e.message||"Failed to fetch data")}return r("An unexpected error occurred")}}),l=(0,s.zD)("admin/fetchMyStudents",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:d}=s();if(!d.isAuthenticated)return r("User must be authenticated to fetch students");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        myStudents {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.myStudents}catch(e){if(n.A.isAxiosError(e)){var l,i;return r((null==(i=e.response)||null==(l=i.data)?void 0:l.message)||e.message||"Failed to fetch students")}return r("An unexpected error occurred")}}),i=(0,s.zD)("admin/fetchMyTeachers",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:d}=s();if(!d.isAuthenticated)return r("User must be authenticated to fetch teachers");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        myTeachers {\n          id\n          userName\n          email\n          role\n          subjectsTaught {\n            id\n            name\n            grades {\n              id\n              score\n            }\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.myTeachers}catch(e){if(n.A.isAxiosError(e)){var l,i;return r((null==(i=e.response)||null==(l=i.data)?void 0:l.message)||e.message||"Failed to fetch teachers")}return r("An unexpected error occurred")}}),c=(0,s.zD)("admin/fetchSubjects",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:d}=s();if(!d.isAuthenticated)return r("User must be authenticated to fetch subjects");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        subjects {\n          id\n          name\n          teacher {\n            id\n            userName\n          }\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.subjects}catch(e){if(n.A.isAxiosError(e)){var l,i;return r((null==(i=e.response)||null==(l=i.data)?void 0:l.message)||e.message||"Failed to fetch subjects")}return r("An unexpected error occurred")}}),o=(0,s.zD)("admin/fetchStudentById",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:d}=s();if(!d.isAuthenticated)return r("User must be authenticated to fetch student details");try{let t=await a.A.post("",{query:"\n      query MyQuery($id: Int!) {\n        student(id: $id) {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n            subject {\n              id\n              name\n            }\n          }\n        }\n      }\n    ",variables:{id:e}});if(t.data.errors)return r(t.data.errors[0].message);return t.data.data.student}catch(e){if(n.A.isAxiosError(e)){var l,i;return r((null==(i=e.response)||null==(l=i.data)?void 0:l.message)||e.message||"Failed to fetch student")}return r("An unexpected error occurred")}}),u=(0,s.Z0)({name:"admin",initialState:{stats:null,subjects:[],students:[],teachers:[],currentStudent:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.stats=t.payload.adminDashboardStats,e.subjects=t.payload.subjects}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.students=t.payload}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.teachers=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.subjects=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(o.pending,e=>{e.loading=!0,e.error=null,e.currentStudent=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.currentStudent=t.payload}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"})}}).reducer},1360:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...d,width:a,height:a,stroke:r,strokeWidth:i?24*Number(l)/Number(a):l,className:n("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),i=(e,t)=>{let r=(0,s.forwardRef)((r,d)=>{let{className:i,...c}=r;return(0,s.createElement)(l,{ref:d,iconNode:t,className:n("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return r.displayName=a(e),r}},2466:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(5125),a=r(2378);let n=s.A.create({baseURL:"https://schoolapi.amroaltayeb14.workers.dev/graphql",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=a.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&a.A.remove("auth_token"),Promise.reject(e)});let d=n},3664:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6132:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6651:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7020:(e,t,r)=>{Promise.resolve().then(r.bind(r,800))},7937:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},9442:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])}},e=>{e.O(0,[619,196,441,255,358],()=>e(e.s=7020)),_N_E=e.O()}]);