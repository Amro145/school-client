(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[339],{69:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},986:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,DN:()=>d,QA:()=>n,id:()=>i,un:()=>o,yx:()=>c});var s=r(9267),a=r(2466),l=r(5125);let n=(0,s.zD)("admin/fetchDashboardData",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:n}=s();if(!n.isAuthenticated)return r("User must be authenticated to fetch admin data");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        adminDashboardStats {\n          totalStudents\n          totalTeachers\n          totalClassRooms\n        }\n        subjects {\n          id\n          name\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch data")}return r("An unexpected error occurred")}}),d=(0,s.zD)("admin/fetchMyStudents",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:n}=s();if(!n.isAuthenticated)return r("User must be authenticated to fetch students");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        myStudents {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.myStudents}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch students")}return r("An unexpected error occurred")}}),i=(0,s.zD)("admin/fetchMyTeachers",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:n}=s();if(!n.isAuthenticated)return r("User must be authenticated to fetch teachers");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        myTeachers {\n          id\n          userName\n          email\n          role\n          subjectsTaught {\n            id\n            name\n            grades {\n              id\n              score\n            }\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.myTeachers}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch teachers")}return r("An unexpected error occurred")}}),c=(0,s.zD)("admin/fetchSubjects",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:n}=s();if(!n.isAuthenticated)return r("User must be authenticated to fetch subjects");try{let e=await a.A.post("",{query:"\n      query MyQuery {\n        subjects {\n          id\n          name\n          teacher {\n            id\n            userName\n          }\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return r(e.data.errors[0].message);return e.data.data.subjects}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch subjects")}return r("An unexpected error occurred")}}),o=(0,s.zD)("admin/fetchStudentById",async(e,t)=>{let{rejectWithValue:r,getState:s}=t,{auth:n}=s();if(!n.isAuthenticated)return r("User must be authenticated to fetch student details");try{let t=await a.A.post("",{query:"\n      query MyQuery($id: Int!) {\n        student(id: $id) {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n            subject {\n              id\n              name\n            }\n          }\n        }\n      }\n    ",variables:{id:e}});if(t.data.errors)return r(t.data.errors[0].message);return t.data.data.student}catch(e){if(l.A.isAxiosError(e)){var d,i;return r((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch student")}return r("An unexpected error occurred")}}),u=(0,s.Z0)({name:"admin",initialState:{stats:null,subjects:[],students:[],teachers:[],currentStudent:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.stats=t.payload.adminDashboardStats,e.subjects=t.payload.subjects}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.students=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.teachers=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.subjects=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(o.pending,e=>{e.loading=!0,e.error=null,e.currentStudent=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.currentStudent=t.payload}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"})}}).reducer},1524:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:i?24*Number(d)/Number(a):d,className:l("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),i=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:i,...c}=r;return(0,s.createElement)(d,{ref:n,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return r.displayName=a(e),r}},2048:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N,runtime:()=>v});var s=r(5155),a=r(2115),l=r(1213),n=r(986),d=r(5299),i=r(6132),c=r(1847);let o=(0,c.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var u=r(69),m=r(3664),x=r(7937);let h=(0,c.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var p=r(1524),f=r(9442),b=r(7013);let g=(0,c.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var y=r(2619),j=r.n(y);let v="edge";function N(e){var t;let{params:r}=e,{id:c}=(0,a.use)(r),y=(0,l.wA)(),{currentStudent:v,loading:N,error:w}=(0,l.d4)(e=>e.admin);return((0,a.useEffect)(()=>{if(c){let e=Number(c);y((0,n.un)(e))}},[y,c]),N)?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,s.jsx)(d.A,{className:"w-12 h-12 text-blue-600 animate-spin"}),(0,s.jsx)("p",{className:"text-slate-500 font-bold animate-pulse",children:"Retrieving Student Dossier..."})]}):w?(0,s.jsxs)("div",{className:"max-w-2xl mx-auto mt-12 bg-white p-10 rounded-[2.5rem] border border-red-50 shadow-2xl shadow-red-500/5 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-red-50 rounded-3xl flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(i.A,{className:"w-10 h-10 text-red-500"})}),(0,s.jsx)("h3",{className:"text-2xl font-black text-slate-900",children:"Retrieval Failed"}),(0,s.jsx)("p",{className:"text-slate-500 mt-2 font-medium",children:w}),(0,s.jsxs)(j(),{href:"/admin/students",className:"mt-8 inline-flex items-center text-blue-600 font-bold hover:underline",children:[(0,s.jsx)(o,{className:"w-4 h-4 mr-1"})," Return to Directory"]})]}):v?(0,s.jsxs)("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-6 duration-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(j(),{href:"/admin/students",className:"group flex items-center text-slate-500 hover:text-slate-900 transition-colors font-bold",children:[(0,s.jsx)("div",{className:"p-2 bg-white rounded-xl border border-slate-100 group-hover:border-slate-200 shadow-sm mr-3 transition-all",children:(0,s.jsx)(o,{className:"w-5 h-5"})}),"Back to Directory"]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{className:"px-6 py-2.5 bg-white border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-all active:scale-95 shadow-sm",children:"Edit Record"}),(0,s.jsx)("button",{className:"px-6 py-2.5 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all active:scale-95 shadow-lg shadow-blue-200",children:"Export Report"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-[3rem] border border-slate-50 shadow-2xl shadow-slate-200/40 overflow-hidden",children:[(0,s.jsx)("div",{className:"h-32 bg-linear-to-r from-blue-600 via-indigo-600 to-purple-600 relative",children:(0,s.jsx)("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_center,var(--tw-gradient-stops))] from-white via-transparent to-transparent"})}),(0,s.jsx)("div",{className:"px-10 pb-10 relative",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between -mt-16 gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end space-y-4 md:space-y-0 md:space-x-8",children:[(0,s.jsxs)("div",{className:"w-40 h-40 rounded-[2.5rem] bg-white p-2 shadow-2xl relative",children:[(0,s.jsx)("div",{className:"w-full h-full rounded-4xl bg-slate-50 flex items-center justify-center text-slate-200 overflow-hidden border border-slate-100",children:(0,s.jsx)(u.A,{className:"w-24 h-24"})}),(0,s.jsx)("div",{className:"absolute bottom-4 right-4 w-10 h-10 bg-emerald-500 border-4 border-white rounded-full flex items-center justify-center shadow-lg",children:(0,s.jsx)("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]}),(0,s.jsxs)("div",{className:"pb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h1",{className:"text-4xl font-black text-slate-900 tracking-tight leading-none",children:v.userName}),(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-[11px] font-black uppercase tracking-widest",children:v.role})]}),(0,s.jsxs)("p",{className:"text-slate-500 font-bold text-lg flex items-center",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-2 opacity-50"}),v.email]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,s.jsxs)("div",{className:"px-6 py-4 bg-slate-50 rounded-3xl border border-slate-100 text-center",children:[(0,s.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assigned Class"}),(0,s.jsxs)("p",{className:"text-lg font-black text-slate-900 flex items-center justify-center",children:[(0,s.jsx)(x.A,{className:"w-5 h-5 mr-2 text-indigo-500"}),(null==(t=v.class)?void 0:t.name)||"Waitlisted"]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-slate-50 rounded-3xl border border-slate-100 text-center",children:[(0,s.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),(0,s.jsxs)("p",{className:"text-lg font-black text-emerald-600 flex items-center justify-center",children:[(0,s.jsx)(h,{className:"w-5 h-5 mr-2 text-emerald-500"}),"Active"]})]})]})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-2xl font-black text-slate-900 tracking-tight flex items-center",children:[(0,s.jsx)(p.A,{className:"w-6 h-6 mr-3 text-blue-600"}),"Academic Performance"]}),(0,s.jsx)("div",{className:"text-slate-400 font-bold text-sm",children:"Fall Semester 2025"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.grades.length>0?v.grades.map(e=>{var t;return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-xl shadow-slate-200/20 hover:border-blue-200 transition-all group",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400 group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors",children:(0,s.jsx)(f.A,{className:"w-6 h-6"})}),(0,s.jsx)("span",{className:"font-black text-slate-900",children:(null==(t=e.subject)?void 0:t.name)||"N/A"})]}),(0,s.jsxs)("div",{className:"text-2xl font-black ".concat(e.score>=80?"text-emerald-500":e.score>=60?"text-amber-500":"text-rose-500"),children:[e.score,"%"]})]}),(0,s.jsx)("div",{className:"w-full h-2 bg-slate-100 rounded-full overflow-hidden mb-2",children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all duration-1000 ".concat(e.score>=80?"bg-emerald-500":e.score>=60?"bg-amber-500":"bg-rose-500"),style:{width:"".concat(e.score,"%")}})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:[(0,s.jsx)("span",{children:"Course Average: 74%"}),(0,s.jsxs)("span",{className:"text-blue-600 flex items-center cursor-pointer hover:underline",children:["Details ",(0,s.jsx)(b.A,{className:"w-3 h-3 ml-1"})]})]})]},e.id)}):(0,s.jsx)("div",{className:"col-span-full py-12 bg-white border border-dashed border-slate-200 rounded-[2.5rem] text-center",children:(0,s.jsx)("p",{className:"text-slate-400 font-bold",children:"No academic evaluation records found."})})})]}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-black text-slate-900 tracking-tight flex items-center",children:[(0,s.jsx)(h,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Engagement Metrics"]}),(0,s.jsxs)("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 p-8 shadow-xl shadow-slate-200/20 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-emerald-50 rounded-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 text-emerald-700 font-black",children:[(0,s.jsx)(g,{className:"w-5 h-5 opacity-70"}),(0,s.jsx)("span",{children:"Attendance"})]}),(0,s.jsx)("span",{className:"font-black text-emerald-700",children:"96.4%"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest pl-1 text-center",children:"Identity Verification"}),(0,s.jsxs)("div",{className:"p-5 bg-slate-50 flex flex-col items-center justify-center rounded-2xl border border-slate-100/50",children:[(0,s.jsx)("div",{className:"w-32 h-32 bg-white rounded-2xl flex items-center justify-center shadow-lg mb-4 text-[10px] font-black text-slate-300",children:"QR ID CODE"}),(0,s.jsxs)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Permanent ID: USR-",v.id]})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-slate-100 uppercase text-center",children:[(0,s.jsx)("p",{className:"text-[10px] font-black text-slate-400 tracking-widest mb-4 italic",children:"Security Clearance level: 1"}),(0,s.jsx)("button",{className:"w-full py-4 bg-rose-50 text-rose-600 rounded-2xl font-black text-sm hover:bg-rose-100 transition-colors active:scale-95",children:"Flag for Review"})]})]})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)("p",{className:"text-slate-500 font-bold",children:"Student record not found or inaccessible."}),(0,s.jsx)(j(),{href:"/admin/students",className:"text-blue-600 font-bold underline mt-4 inline-block",children:"Back to Students"})]})}},2466:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5125),a=r(2378);let l=s.A.create({baseURL:"https://schoolapi.amroaltayeb14.workers.dev/graphql",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=a.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&a.A.remove("auth_token"),Promise.reject(e)});let n=l},3664:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6132:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7013:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},7937:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},8478:(e,t,r)=>{Promise.resolve().then(r.bind(r,2048))},9442:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])}},e=>{e.O(0,[619,196,441,255,358],()=>e(e.s=8478)),_N_E=e.O()}]);