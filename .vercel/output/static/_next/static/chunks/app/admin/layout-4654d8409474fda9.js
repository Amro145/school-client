(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},534:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1847:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:c,iconNode:h,...u}=e;return(0,s.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:a,strokeWidth:d?24*Number(i)/Number(r):i,className:n("lucide",o),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),d=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:d,...o}=a;return(0,s.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return a.displayName=r(e),a}},2466:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(5125),r=a(2378);let n=s.A.create({baseURL:"https://schoolapi.amroaltayeb14.workers.dev/graphql",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=r.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&r.A.remove("auth_token"),Promise.reject(e)});let l=n},3142:(e,t,a)=>{Promise.resolve().then(a.bind(a,4321))},3915:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>h,Lx:()=>d,ri:()=>c});var s=a(9267),r=a(2466),n=a(2378),l=a(5125);let i={user:null,token:n.A.get("auth_token")||null,loading:!1,error:null,isAuthenticated:!!n.A.get("auth_token")},d=(0,s.zD)("auth/login",async(e,t)=>{let{email:a,password:s}=e,{rejectWithValue:i}=t;try{let e=await r.A.post("",{query:"\n      mutation login($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n          token\n          user {\n            id\n            email\n            userName\n            role\n          }\n        }\n      }\n    ",variables:{email:a,password:s}});if(e.data.errors)return i(e.data.errors[0].message);let{token:t,user:l}=e.data.data.login;return n.A.set("auth_token",t,{expires:7,secure:!0,sameSite:"strict"}),{token:t,user:l}}catch(e){if(l.A.isAxiosError(e)){var d,o;return i((null==(o=e.response)||null==(d=o.data)?void 0:d.message)||e.message||"Login failed")}return i("Login failed")}}),o=(0,s.Z0)({name:"auth",initialState:i,reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,n.A.remove("auth_token")}},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.token=t.payload.token,e.user=t.payload.user,e.isAuthenticated=!0}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{logout:c}=o.actions,h=o.reducer},4321:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(5155),r=a(2619),n=a.n(r),l=a(63),i=a(1847);let d=(0,i.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=a(7937),c=a(534),h=a(9442),u=a(1169);let m=(0,i.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),x=(0,i.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),p=(0,i.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f=(0,i.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var g=a(2115),k=a(1213),y=a(5299);function j(e){let{children:t}=e,{isAuthenticated:a,loading:r}=(0,k.d4)(e=>e.auth),n=(0,l.useRouter)(),i=(0,l.usePathname)();return((0,g.useEffect)(()=>{a||r||"/login"===i||n.push("/login")},[a,r,n,i]),a||"/login"===i)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,s.jsx)(y.A,{className:"w-12 h-12 text-blue-600 animate-spin"})})}var b=a(3915);let v=[{name:"Dashboard",href:"/admin",icon:d},{name:"Classes",href:"/admin/classes",icon:o.A},{name:"Subjects",href:"/admin/subjects",icon:c.A},{name:"Students",href:"/admin/students",icon:h.A},{name:"Teachers",href:"/admin/teachers",icon:u.A}];function w(e){let{children:t}=e,a=(0,l.usePathname)(),[r,i]=(0,g.useState)(!1),d=(0,k.wA)(),o=e=>{e.preventDefault(),d((0,b.ri)())};return(0,s.jsx)(j,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 flex",children:[(0,s.jsxs)("aside",{className:"hidden md:flex w-72 bg-white border-r border-slate-200 flex-col fixed h-full",children:[(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)(n(),{href:"/admin",className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)(m,{className:"text-white w-6 h-6"})}),(0,s.jsx)("span",{className:"text-xl font-bold text-slate-900 tracking-tight",children:"EduDash"})]})}),(0,s.jsx)("nav",{className:"grow px-4 space-y-2",children:v.map(e=>{let t=a===e.href;return(0,s.jsxs)(n(),{href:e.href,className:"flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ".concat(t?"bg-blue-50 text-blue-600 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5 ".concat(t?"text-blue-600":"text-slate-400")}),(0,s.jsx)("span",{children:e.name})]},e.name)})}),(0,s.jsx)("div",{className:"p-4 border-t border-slate-100",children:(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center space-x-3 px-4 py-3 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200",children:[(0,s.jsx)(x,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Logout"})]})})]}),(0,s.jsxs)("main",{className:"grow md:ml-72 min-h-screen",children:[(0,s.jsxs)("header",{className:"md:hidden bg-white border-b border-slate-200 px-4 py-4 flex items-center justify-between sticky top-0 z-50",children:[(0,s.jsxs)(n(),{href:"/admin",className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(m,{className:"text-white w-5 h-5"})}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:"EduDash"})]}),(0,s.jsx)("button",{onClick:()=>i(!r),className:"p-2 text-slate-500 hover:bg-slate-100 rounded-lg",children:r?(0,s.jsx)(p,{}):(0,s.jsx)(f,{})})]}),r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 md:hidden",onClick:()=>i(!1),children:(0,s.jsx)("div",{className:"w-72 bg-white h-full p-8",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("nav",{className:"grow space-y-2",children:v.map(e=>{let t=a===e.href;return(0,s.jsxs)(n(),{href:e.href,onClick:()=>i(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ".concat(t?"bg-blue-50 text-blue-600":"text-slate-500"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:e.name})]},e.name)})}),(0,s.jsx)("div",{className:"mt-auto pt-4 border-t border-slate-100",children:(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center space-x-3 px-4 py-3 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200",children:[(0,s.jsx)(x,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Logout"})]})})]})})}),(0,s.jsx)("div",{className:"p-6 md:p-10 max-w-7xl mx-auto",children:t})]})]})})}},5299:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7937:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},9442:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])}},e=>{e.O(0,[619,196,441,255,358],()=>e(e.s=3142)),_N_E=e.O()}]);