(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{508:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},986:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>u,DN:()=>d,QA:()=>l,id:()=>i,un:()=>o,yx:()=>c});var r=a(9267),s=a(2466),n=a(5125);let l=(0,r.zD)("admin/fetchDashboardData",async(e,t)=>{let{rejectWithValue:a,getState:r}=t,{auth:l}=r();if(!l.isAuthenticated)return a("User must be authenticated to fetch admin data");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        adminDashboardStats {\n          totalStudents\n          totalTeachers\n          totalClassRooms\n        }\n        subjects {\n          id\n          name\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return a(e.data.errors[0].message);return e.data.data}catch(e){if(n.A.isAxiosError(e)){var d,i;return a((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch data")}return a("An unexpected error occurred")}}),d=(0,r.zD)("admin/fetchMyStudents",async(e,t)=>{let{rejectWithValue:a,getState:r}=t,{auth:l}=r();if(!l.isAuthenticated)return a("User must be authenticated to fetch students");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        myStudents {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return a(e.data.errors[0].message);return e.data.data.myStudents}catch(e){if(n.A.isAxiosError(e)){var d,i;return a((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch students")}return a("An unexpected error occurred")}}),i=(0,r.zD)("admin/fetchMyTeachers",async(e,t)=>{let{rejectWithValue:a,getState:r}=t,{auth:l}=r();if(!l.isAuthenticated)return a("User must be authenticated to fetch teachers");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        myTeachers {\n          id\n          userName\n          email\n          role\n          subjectsTaught {\n            id\n            name\n            grades {\n              id\n              score\n            }\n          }\n        }\n      }\n    "});if(e.data.errors)return a(e.data.errors[0].message);return e.data.data.myTeachers}catch(e){if(n.A.isAxiosError(e)){var d,i;return a((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch teachers")}return a("An unexpected error occurred")}}),c=(0,r.zD)("admin/fetchSubjects",async(e,t)=>{let{rejectWithValue:a,getState:r}=t,{auth:l}=r();if(!l.isAuthenticated)return a("User must be authenticated to fetch subjects");try{let e=await s.A.post("",{query:"\n      query MyQuery {\n        subjects {\n          id\n          name\n          teacher {\n            id\n            userName\n          }\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n          }\n        }\n      }\n    "});if(e.data.errors)return a(e.data.errors[0].message);return e.data.data.subjects}catch(e){if(n.A.isAxiosError(e)){var d,i;return a((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch subjects")}return a("An unexpected error occurred")}}),o=(0,r.zD)("admin/fetchStudentById",async(e,t)=>{let{rejectWithValue:a,getState:r}=t,{auth:l}=r();if(!l.isAuthenticated)return a("User must be authenticated to fetch student details");try{let t=await s.A.post("",{query:"\n      query MyQuery($id: Int!) {\n        student(id: $id) {\n          id\n          userName\n          email\n          role\n          class {\n            id\n            name\n          }\n          grades {\n            id\n            score\n            subject {\n              id\n              name\n            }\n          }\n        }\n      }\n    ",variables:{id:e}});if(t.data.errors)return a(t.data.errors[0].message);return t.data.data.student}catch(e){if(n.A.isAxiosError(e)){var d,i;return a((null==(i=e.response)||null==(d=i.data)?void 0:d.message)||e.message||"Failed to fetch student")}return a("An unexpected error occurred")}}),u=(0,r.Z0)({name:"admin",initialState:{stats:null,subjects:[],students:[],teachers:[],currentStudent:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.stats=t.payload.adminDashboardStats,e.subjects=t.payload.subjects}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.students=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.teachers=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.subjects=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"}).addCase(o.pending,e=>{e.loading=!0,e.error=null,e.currentStudent=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.currentStudent=t.payload}).addCase(o.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"An error occurred"})}}).reducer},1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1847:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:i?24*Number(d)/Number(s):d,className:n("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),i=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:i,...c}=a;return(0,r.createElement)(d,{ref:l,iconNode:t,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return a.displayName=s(e),a}},2466:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(5125),s=a(2378);let n=r.A.create({baseURL:"https://schoolapi.amroaltayeb14.workers.dev/graphql",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=s.A.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&s.A.remove("auth_token"),Promise.reject(e)});let l=n},6079:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y,runtime:()=>g});var r=a(5155),s=a(2115),n=a(1213),l=a(986),d=a(7937),i=a(6132),c=a(6191),o=a(6651),u=a(508),h=a(9397);let x=(0,a(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a(1360),p=a(2619),b=a.n(p);let g="edge";function y(){let e=(0,n.wA)(),{subjects:t,loading:a,error:p}=(0,n.d4)(e=>e.admin);return((0,s.useEffect)(()=>{e((0,l.yx)())},[e]),a&&0===t.length)?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"}),(0,r.jsx)(d.A,{className:"w-6 h-6 text-blue-600 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),(0,r.jsx)("p",{className:"text-slate-500 font-bold tracking-tight animate-pulse",children:"Cataloging Academic Subjects..."})]}):p?(0,r.jsxs)("div",{className:"bg-white border border-red-100 p-10 rounded-[2.5rem] shadow-xl shadow-red-500/5 flex flex-col items-center text-center space-y-6",children:[(0,r.jsx)("div",{className:"p-4 bg-red-50 rounded-2xl",children:(0,r.jsx)(i.A,{className:"w-10 h-10 text-red-500"})}),(0,r.jsxs)("div",{className:"max-w-md",children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-slate-900 leading-tight",children:"Sync Encountered an Obstacle"}),(0,r.jsx)("p",{className:"text-slate-500 mt-2 font-medium",children:p})]}),(0,r.jsx)("button",{onClick:()=>e((0,l.yx)()),className:"px-8 py-3 bg-red-600 text-white rounded-2xl font-black hover:bg-red-700 transition-all active:scale-95 shadow-lg shadow-red-200",children:"Attempt Re-Sync"})]}):(0,r.jsxs)("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom-8 duration-1000 pb-20",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-black text-slate-900 tracking-tight leading-none",children:"Curriculum Index"}),(0,r.jsx)("p",{className:"text-slate-500 mt-3 font-medium text-lg italic",children:"Defining institutional learning pathways and faculty assignments..."})]}),(0,r.jsxs)(b(),{href:"/admin/subjects/new",className:"relative group overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),(0,r.jsxs)("div",{className:"relative bg-slate-900 text-white px-8 py-4 rounded-xl font-black text-sm hover:bg-slate-800 transition-all flex items-center justify-center shadow-lg active:scale-95 uppercase tracking-widest leading-none",children:[(0,r.jsx)(c.A,{className:"w-5 h-5 mr-3"})," Architect New Subject"]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-[48px] border border-slate-100 shadow-[0_8px_30px_rgb(0,0,0,0.02)] overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-8 border-b border-slate-50 relative group glass",children:[(0,r.jsx)("div",{className:"absolute left-14 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors",children:(0,r.jsx)(o.A,{className:"w-6 h-6"})}),(0,r.jsx)("input",{type:"text",placeholder:"Scan curriculum by subject name, faculty lead or academic class...",className:"w-full pl-16 pr-8 py-6 bg-slate-50/50 rounded-3xl border border-transparent focus:border-blue-100 focus:bg-white focus:ring-4 focus:ring-blue-50 placeholder:text-slate-300 transition-all font-bold text-slate-900 outline-none"})]}),(0,r.jsx)("div",{className:"overflow-x-auto custom-scrollbar",children:(0,r.jsxs)("table",{className:"w-full text-left",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-slate-50/50 text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] border-b border-slate-100",children:[(0,r.jsx)("th",{className:"px-10 py-6",children:"Subject Specification"}),(0,r.jsx)("th",{className:"px-10 py-6",children:"Lead Instructor"}),(0,r.jsx)("th",{className:"px-10 py-6",children:"Target Cohort"}),(0,r.jsx)("th",{className:"px-10 py-6 text-center",children:"Outcome Analytics"}),(0,r.jsx)("th",{className:"px-10 py-6 text-right",children:"Operational Status"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-slate-50",children:null==t?void 0:t.map(e=>{var t,a,s,n;let l=(null==(t=e.grades)?void 0:t.length)>0?Math.round(e.grades.reduce((e,t)=>e+t.score,0)/e.grades.length):null;return(0,r.jsxs)("tr",{className:"hover:bg-slate-50/30 transition-all duration-300 group",children:[(0,r.jsx)("td",{className:"px-10 py-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-500/20 group-hover:scale-110 group-hover:rotate-3 transition-transform duration-500",children:(0,r.jsx)(d.A,{className:"w-8 h-8"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block font-black text-slate-900 text-lg group-hover:text-blue-600 transition-colors leading-none mb-1.5",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md font-black uppercase tracking-widest",children:["SID: ",e.id]}),(0,r.jsx)("span",{className:"text-[10px] bg-blue-50 text-blue-600 px-2 py-0.5 rounded-md font-black uppercase tracking-widest",children:"ACTIVE"})]})]})]})}),(0,r.jsx)("td",{className:"px-10 py-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 text-slate-900 font-black",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-slate-50 rounded-xl flex items-center justify-center border border-slate-100 group-hover:border-blue-100 transition-colors",children:(0,r.jsx)(u.A,{className:"w-5 h-5 text-slate-400 group-hover:text-blue-500"})}),(0,r.jsx)("span",{className:"group-hover:translate-x-1 transition-transform",children:(null==(a=e.teacher)?void 0:a.userName)||"Pending Assignment"})]})}),(0,r.jsx)("td",{className:"px-10 py-8",children:(0,r.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-white border border-slate-100 shadow-sm rounded-2xl font-black text-sm group-hover:border-blue-100 transition-colors",children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2.5 text-blue-600"}),(null==(s=e.class)?void 0:s.name)||"Cross-Institutional"]})}),(0,r.jsx)("td",{className:"px-10 py-8",children:(0,r.jsx)("div",{className:"flex flex-col items-center",children:null!==l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 w-full max-w-[140px]",children:[(0,r.jsx)("div",{className:"flex-grow h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all duration-1000 ".concat(l>80?"bg-emerald-500":l>60?"bg-amber-500":"bg-rose-500"),style:{width:"".concat(l,"%")}})}),(0,r.jsxs)("span",{className:"font-black text-sm tabular-nums ".concat(l>80?"text-emerald-600":l>60?"text-amber-600":"text-rose-600"),children:[l,"%"]})]}),(0,r.jsxs)("div",{className:"text-[10px] text-slate-400 font-black mt-2 uppercase tracking-widest",children:["Avg from ",(null==(n=e.grades)?void 0:n.length)||0," Learners"]})]}):(0,r.jsx)("div",{className:"px-4 py-2 bg-slate-50 rounded-xl text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Awaiting Data"})})}),(0,r.jsx)("td",{className:"px-10 py-8 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,r.jsx)("button",{className:"p-4 bg-slate-50 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-2xl transition-all shadow-sm border border-slate-200/50 hover:border-blue-100 active:scale-95",children:(0,r.jsx)(x,{className:"w-5 h-5"})}),(0,r.jsx)("button",{className:"p-4 bg-slate-50 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm border border-slate-200/50 hover:border-red-100 active:scale-95",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]})})]},e.id)})})]})}),(null==t?void 0:t.length)===0&&!a&&(0,r.jsxs)("div",{className:"py-32 text-center bg-white relative overflow-hidden group",children:[(0,r.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-64 h-64 bg-blue-50 rounded-full blur-[100px] opacity-30 group-hover:scale-150 transition-transform duration-1000"}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)("div",{className:"w-32 h-32 bg-slate-50 rounded-[48px] flex items-center justify-center mx-auto mb-10 shadow-inner group-hover:rotate-12 transition-transform duration-500",children:(0,r.jsx)(d.A,{className:"w-16 h-16 text-slate-200"})}),(0,r.jsx)("h3",{className:"text-3xl font-black text-slate-900 tracking-tight mb-4",children:"Educational Void"}),(0,r.jsx)("p",{className:"text-slate-500 max-w-sm mx-auto font-medium text-lg leading-relaxed mb-10 italic",children:"The academic catalog is currently empty and requires initial curriculum architecting."}),(0,r.jsxs)(b(),{href:"/admin/subjects/new",className:"inline-flex items-center justify-center bg-blue-600 text-white px-12 py-5 rounded-[24px] font-black text-sm uppercase tracking-widest hover:bg-blue-700 transition-all shadow-2xl active:scale-95",children:[(0,r.jsx)(c.A,{className:"w-6 h-6 mr-3"})," Initialize Core Subject"]})]})]}),(0,r.jsx)("div",{className:"p-8 bg-slate-50/30 border-t border-slate-100 text-center glass",children:(0,r.jsx)("button",{className:"bg-white text-slate-800 border border-slate-200 px-10 py-4 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-blue-600 hover:text-white hover:border-blue-600 transition-all shadow-xl shadow-slate-200/50 active:scale-95",children:"Synchronize Knowledge Nodes"})})]})]})}},6132:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6651:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7937:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},8899:(e,t,a)=>{Promise.resolve().then(a.bind(a,6079))},9397:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])}},e=>{e.O(0,[619,196,441,255,358],()=>e(e.s=8899)),_N_E=e.O()}]);